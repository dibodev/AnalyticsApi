{"openapi":"3.0.0","info":{"title":"Dibodev Analytics - API Documentation","version":"1.0.0"},"paths":{"/projects":{"get":{"tags":["Project"],"summary":"Get all projects","description":"Get all projects with visitor count in the last 24 hours","operationId":"getAllProjects","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Projects"}}}}}},"post":{"tags":["Project"],"summary":"Create a new project","description":"Create a new project","operationId":"createProject","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateProject"}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Project"}}}}}}},"/projects/{id}":{"get":{"tags":["Project"],"summary":"Get a project by id","description":"Get a project by id","operationId":"getProjectById","parameters":[{"name":"id","in":"path","description":"id of project","required":true,"schema":{"type":"number"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Project"}}}},"404":{"description":"Project not found"}}},"put":{"tags":["Project"],"summary":"Update a project by id","description":"Update a project by id","operationId":"updateProjectById","parameters":[{"name":"id","in":"path","description":"id of project","required":true,"schema":{"type":"number"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateProject"}}}},"responses":{"200":{"description":"Project updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Project"}}}},"404":{"description":"Project not found"}}},"delete":{"tags":["Project"],"summary":"Delete a project by id","description":"Delete a project by id","operationId":"deleteProjectById","parameters":[{"name":"id","in":"path","description":"id of project","required":true,"schema":{"type":"number"}}],"responses":{"204":{"description":"Project deleted"},"404":{"description":"Project not found"}}}}},"components":{"schemas":{"Location_post_request":{"type":"object","properties":{"country":{"type":"string","example":"France"},"region":{"type":"string","example":"Île-de-France"},"city":{"type":"string","example":"Paris"}}},"Location_get_return":{"type":"object","properties":{"id":{"type":"number","example":1},"country":{"type":"string","example":"France"},"region":{"type":"string","example":"Île-de-France"},"city":{"type":"string","example":"Paris"},"visitors":{"type":"array","items":{"$ref":"#/components/schemas/Visitor_get_return"}},"createdAt":{"type":"string","format":"date-time","example":"2023-08-01T13:48:18.239+00:00"},"updatedAt":{"type":"string","format":"date-time","example":"2023-08-01T13:48:18.239+00:00"}}},"CreateProject":{"type":"object","properties":{"domain":{"type":"string","example":"example.com"}}},"UpdateProject":{"type":"object","properties":{"domain":{"type":"string","example":"example.com"}}},"Project":{"type":"object","properties":{"id":{"type":"number","example":1},"domain":{"type":"string","example":"example.com"},"favicon":{"type":"string","example":"https://example.com/favicon.png"},"active":{"type":"boolean","example":true},"created_at":{"type":"string","format":"date-time","example":"2023-08-01T13:48:18.239+00:00"},"updated_at":{"type":"string","format":"date-time","example":"2023-08-01T13:48:18.239+00:00"}}},"Projects":{"type":"array","items":{"type":"object","properties":{"project":{"$ref":"#/components/schemas/Project"},"visitorLast24Hours":{"type":"number","example":100}}}},"Visitor_post_request":{"type":"object","properties":{"visitorId":{"type":"string","example":"v1234567"},"projectId":{"type":"number","example":1},"locationId":{"type":"number","example":2,"nullable":true}}},"Visitor_get_return":{"type":"object","properties":{"id":{"type":"number","example":10},"visitorId":{"type":"string","example":"v1234567"},"projectId":{"type":"number","example":1},"locationId":{"type":"number","example":2,"nullable":true},"location":{"$ref":"#/components/schemas/Location_get_return"},"visitorEvents":{"type":"array","items":{"$ref":"#/components/schemas/VisitorEvent_get_return"}},"project":{"$ref":"#/components/schemas/Project_get_return"},"createdAt":{"type":"string","format":"date-time","example":"2023-08-01T13:48:18.239+00:00"},"updatedAt":{"type":"string","format":"date-time","example":"2023-08-01T13:48:18.239+00:00"}}},"VisitorEvent_post_request":{"type":"object","properties":{"visitorId":{"type":"number","example":1},"browser":{"type":"string","example":"Chrome","nullable":true},"os":{"type":"string","example":"Windows","nullable":true},"url":{"type":"string","example":"https://example.com/page1","nullable":true},"deviceType":{"type":"string","example":"Desktop","nullable":true},"referrer":{"type":"string","example":"https://google.com","nullable":true}}},"VisitorEvent_get_return":{"type":"object","properties":{"id":{"type":"number","example":10},"visitorId":{"type":"number","example":1},"browser":{"type":"string","example":"Chrome","nullable":true},"os":{"type":"string","example":"Windows","nullable":true},"url":{"type":"string","example":"https://example.com/page1","nullable":true},"deviceType":{"type":"string","example":"Desktop","nullable":true},"referrer":{"type":"string","example":"https://google.com","nullable":true},"visitor":{"$ref":"#/components/schemas/Visitor_get_return"},"createdAt":{"type":"string","format":"date-time","example":"2023-08-01T13:48:18.239+00:00"},"updatedAt":{"type":"string","format":"date-time","example":"2023-08-01T13:48:18.239+00:00"}}}}},"tags":[]}